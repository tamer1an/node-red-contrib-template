<!-- Config Node -->
<script type="text/x-red" data-template-name="template-credentials">
    <div class="form-row">
      <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="template.label.config.name"></span></label>
      <input type="text" id="node-config-input-name">
    </div>

    <div class="form-row">
      <label for="node-config-input-token"><i class="fa fa-key"></i> <span data-i18n="template.label.config.token"></span></label>
      <input type="text" id="node-config-input-token">
    </div>

</script>
<script type="text/javascript">
  RED.nodes.registerType('template-credentials', {
    defaults: {
      name: {value: "", required: true}
    },
    category: 'config',
    credentials: {
      token: {type: "password", required: true}
    },
    label: function () {
      return this.name;
    },
    exportable: false
  });
</script>

<!-- REPO Node -->
<script type="text/x-red" data-template-name="template-node1">
    <div class="form-row">
          <label for="node-input-template"><i class="fa fa-key"></i> <span data-i18n="template.label.template-id"></span></label>
          <input type="text" id="node-input-template">
    </div>
</script>
<script type="text/x-red" data-help-name="template-node1">
    <p>A simple node to create a template</p>
</script>
<script type="text/javascript">
  function oneditprepare() {  }
  function oneditsave() {  }
  RED.nodes.registerType('template-node1', {
    defaults: {
      template: {type: "template-credentials", required: true},
      name: {value: ""},
      username: {required: true},
      usernameType: {value: "str"},
      repository: {required: true},
      repositoryType: {value: "str"},
      action: {value: "show", required: true},
      branch: {value: "master"},
      branchType: {value: ""},
      path: {value: ""},
      pathType: {value: "str"},
      pathto: {value: ""},
      pathtoType: {value: "str"},
      contents: {value: "payload"},
      contentsType: {value: "msg"},
      outputs: {value: 1}
    },
    category: 'template',
    color: "#787878",
    inputs: 1,
    outputs: 1,
    icon: "template.png",
    label: function () {
      if (this.name) return this.name;
      else {
        return this.action ? this.action + " " + this.username + " / " + this.repository : "Repo";
      }
    },
    paletteLabel: function () {
      return "testNode1";
    },
    oneditprepare: oneditprepare,
    oneditsave: oneditsave
  });
</script>

<!-- REPO Node -->
<script type="text/x-red" data-template-name="template-node2">
    <div class="form-row">
        <label for="node-input-template"><i class="fa fa-key"></i> <span data-i18n="template.label.template-id"></span></label>
        <input type="text" id="node-input-template">
    </div>
</script>
<script type="text/x-red" data-help-name="template-node2">
    <p>A node to manipulate user infos and repos</p>
</script>
<script type="text/javascript">
  function oneditprepare() {}
  function oneditsave() {}
  RED.nodes.registerType('template-node2', {
    defaults: {
      template: {type: "template-credentials", required: true},
      name: {value: ""},
      action: {value: "", required: true},
      outputs: {value: 1},
      options: {value: ""},
      optionsType: {value: "json"},
      username: {value: ""},
      usernameType: {value: "str"},
      orgname: {value: ""},
      orgnameType: {value: "str"}
    },
    category: 'template',
    color: "#787878",
    inputs: 1,
    outputs: 1,
    icon: "template.png",
    label: function () {
      return this.name || "User";
    },
    paletteLabel: function () {
      return "testNode2";
    },
    oneditprepare: oneditprepare,
    oneditsave: oneditsave
  });
</script>
